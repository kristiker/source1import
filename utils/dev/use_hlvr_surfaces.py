hlvr_surfaces = [
    "default_silent",
    "default",
    "prop.ammo_shell_pistol",
    "base.metal",
    "base.sheetmetal",
    "world.metal",
    "world.metal_combine",
    "world.metal_panel",
    "world.metal_thin",
    "world.metal_vent",
    "base.prop.metal",
    "prop.metal_valve_handle",
    "prop.metal_box",
    "prop.metal_vent",
    "base.metal_grate",
    "world.metal_grate",
    "prop.metal_grenade",
    "prop.metal_gas_canister",
    "prop.metal_barrel",
    "prop.metal_barrel_floating",
    "prop.metal_popcan",
    "prop.metal_paintcan",
    "prop.metal_caster",
    "base.dirt",
    "world.dirt",
    "world.mud",
    "world.slipperyslime",
    "world.grass",
    "world.snow",
    "world.ice",
    "world.sand",
    "base.wood",
    "world.wood_solid",
    "world.wood_debris",
    "world.wood_lowdensity",
    "world.wood_panel",
    "base.prop_wood",
    "prop.wood_crate",
    "prop.wood_box",
    "prop.wood_plank",
    "prop.wood_furniture",
    "prop.wood_gib",
    "prop.wood_panel",
    "prop.wood_ladder",
    "base.water",
    "world.slime",
    "world.quicksand",
    "world.water",
    "world.water_shallow",
    "base.glass",
    "world.glass",
    "prop.glass_tv_tube",
    "prop.glass_tv_tube_02",
    "prop.glass",
    "prop.pottery",
    "base.concrete",
    "world.concrete",
    "world.concrete_debris",
    "world.rock",
    "world.boulder",
    "world.gravel",
    "world.asphalt",
    "world.brick",
    "world.brick_hollow",
    "prop.concrete",
    "prop.flesh",
    "prop.flesh_bloody",
    "prop.flesh_alien",
    "prop.flesh_armored",
    "npc_combine_soldier",
    "npc_combine_grunt_gastank",
    "npc_combine_soldier_gear",
    "npc_zombie_flesh",
    "npc_blindzombie_body",
    "npc_creature_flesh",
    "npc_headcrab_flesh",
    "npc_headcrab_black_flesh",
    "npc_barnacle_flesh",
    "npc_reviver_flesh",
    "npc_reviver_node_flesh",
    "npc_reviver_zombie_flesh",
    "npc_zombie_dead_flesh",
    "npc_antlion_flesh",
    "npc_antlion_armor",
    "npc_manhack",
    "npc_combine_hand_shield",
    "npc_boomerplant",
    "world.plastic",
    "prop.plastic",
    "prop.plastic_barrel",
    "prop.plastic_barrel_buoyant",
    "prop.plastic_crate",
    "prop.plastic_bottle_small",
    "base.rubber",
    "prop.rubber_tire",
    "prop.rubber_ball",
    "base.cardboard",
    "world.cardboard",
    "prop.cardboard",
    "prop.paper",
    "prop.paper_cup",
    "world.ceiling_tile",
    "world.chainlink",
    "prop.chain",
    "prop.metal_jerrycan",
    "prop.metal_bottle_crate",
    "prop.metal_mug",
    "prop.metal_office_chair",
    "prop.metal_coffee_pot",
    "prop.metal_bucket",
    "prop.metal_trash_can",
    "prop.watermelon",
    "player",
    "world.player_control_clip",
    "no_decal",
    "world.foliage",
    "world.foliage_palm",
    "world.carpet",
    "world.sofa",
    "world.mattress",
    "world.plaster",
    "roller",
    "world.tile_floor",
    "world.ladder",
    "prop.computer",
    "prop.rock",
    "prop.porcelain",
    "prop.boulder",
    "prop.brick",
    "prop.concrete_block",
    "prop.plastic_box",
    "base.weapon",
    "weapon",
    "prop.metal_gun",
    "prop.ammo_shell_shotgun",
    "prop.ammo_clip",
    "prop.combine_battery",
    "prop.health_pen",
    "npc_antlion_abdomen",
    "canister",
    "cardboard",
    "ceiling_tile",
    "chainlink",
    "chain",
    "computer",
    "concrete",
    "glass",
    "glassbottle",
    "grass",
    "grenade",
    "dirt",
    "flesh",
    "bloodyflesh",
    "alienflesh",
    "armorflesh",
    "item",
    "ladder",
    "solidmetal",
    "metal",
    "metalpanel",
    "metal_barrel",
    "floating_metal_barrel",
    "Metal_Box",
    "metalgrate",
    "metalvent",
    "mud",
    "popcan",
    "pottery",
    "paintcan",
    "plastic_barrel",
    "plastic_box",
    "plastic",
    "rubber",
    "quicksand",
    "sand",
    "slime",
    "slipperyslime",
    "tile",
    "wade",
    "water",
    "Wood",
    "Wood_lowdensity",
    "wood_box",
    "wood_create",
    "wood_plank",
    "Wood_Solid",
    "Wood_Panel",
    "woodladder",
    "rock",
    "porcelain",
    "boulder",
    "gravel",
    "brick",
    "concrete_block",
    "watermelon",
    "snow",
    "ice",
    "carpet",
    "plaster",
    "energy_ball",
    "prop.pillow",
    "base.cloth",
    "npc_xen_hearing_flower_flesh",
    "prop.sofa",
    "prop.wood_crate_large",
    "prop.wood_crate_small",
    "prop.wood_gib_small",
    "prop.wood_gib_large",
    "npc_headcrab_armor",
    "prop.cardboard_box_large",
    "prop.cardboard_box_medium",
    "prop.cardboard_box_small",
    "prop.cardboard_box_broken_large",
    "prop.cardboard_box_broken_medium",
    "prop.cardboard_box_empty_medium",
    "prop.cardboard_box_empty_small",
    "prop.cardboard_carton_biscuits",
    "prop.cardboard_carton_butter",
    "prop.cardboard_carton_cereal",
    "prop.cardboard_carton_cigarettes",
    "prop.cardboard_carton_crackers",
    "prop.cardboard_carton_milk",
    "prop.metal_cookware_pan_a",
    "prop.metal_cookware_pan_b",
    "prop.metal_cookware_pot_a",
    "prop.metal_cookware_pot_b",
    "prop.metal_cookware_pot_lid",
    "prop.pottery_flowerpot",
    "prop.pottery_gnome",
    "prop.pottery_shard",
    "prop.xen_resin_stack",
    "prop.xen_resin_puck",
    "prop.plastic_bottle_large",
    "prop.plastic_bottle_bleach",
    "prop.plastic_bottle_dishsoap",
    "prop.antlions_habitat",
    "prop.glass_bottle_shard",
    "prop.glass_bottle_large_wine",
    "prop.glass_bottle_large_spirits",
    "prop.glass_bottle_small",
    "prop.glass_jar",
    "prop.glass_vase",
    "prop.glass_tumbler",
    "prop.metal_manhack_gib",
    "prop.metal_jerrycan_explosive",
    "world.drywall",
    "npc_combine_soldier_armor",
    "prop.porcelain_dinnerplate",
    "prop.ammo_clip_large",
    "prop.ammo_clip_rapidfire",
    "prop.ammo_clip_shotgun",
    "player_hand",
    "prop.plastic_crate_large",
    "prop.plastic_paint_pail",
    "prop.plastic_traffic_cone",
    "prop.plastic_traffic_drum",
    "prop.metal_barrel_explosive",
    "prop.cardboard_vort_magic",
    "prop.metal_popcan_empty",
    "prop.plastic_bottle_cap",
    "prop.metal_ashtray",
    "npc_antlion_worker_flesh",
    "npc_antlion_worker_abdomen",
    "npc_combine_soldier_kevlar",
    "prop.book",
    "prop.paper_towel",
    "prop.cigarette",
    "prop.ration_bar",
    "prop.luggage_large",
    "prop.luggage_small",
    "prop.metal_tin",
    "prop.metal_tin_large",
    "prop.metal_tin_small",
    "prop.metal_tin_tiny",
    "prop.metal_food_can",
    "prop.metal_food_can_empty",
    "prop.porcelain_mug",
    "prop.porcelain_shard",
    "prop.porcelain_teapot",
    "prop.concrete_block_small",
    "prop.concrete_block_shard",
    "prop.brick_shard",
    "prop.wood_drawer",
    "prop.wood_pic_frame_large",
    "prop.glass_pic_frame",
    "prop.metal_tool_small",
    "prop.metal_tool_large",
    "prop.metal_tool",
    "prop.metal_tool_hammer",
    "prop.plastic_safety_hat",
    "prop.soap_bar",
    "prop.leather_shoe",
    "prop.plastic_keyboard",
    "prop.plastic_trashcan",
    "prop.plastic_trashcan_lid",
    "prop.metal_wheel_hub",
    "prop.plastic_bottle_pills_small",
    "prop.plastic_bottle_pills_large",
    "prop.billiard_ball",
    "prop.gpu",
    "prop.plastic_tray",
    "prop.plastic_small_misc",
    "prop.plastic_radio",
    "prop.plastic_vhs",
    "prop.plastic_bottle_fivegal",
    "prop.foliage_stem",
    "prop.plastic_telephone",
    "prop.wood_radio",
    "prop.ceramic_jar",
    "prop.flesh_bloody_small",
    "prop.metal_small",
    "prop.metal",
    "prop.keyfob",
    "prop.cardboard_matchbox",
    "prop.cardboard_matchbook",
    "prop.combine_console_tank",
    "prop.glass_health_vial",
    "prop.metal_padlock",
    "xen_foliage_impact",
    "world.metal_pipe",
    "prop.wood_pallet",
    "prop.wood_shovel_handle",
    "prop.metal_shovel_blade",
    "prop.paper_newspaper",
    "world.metal_vehicle_ext",
    "prop.rubber_boot",
    "prop.rubber_glove",
    "prop.respirator",
    "prop.metal_geiger_counter",
    "prop.metal_microscope",
    "prop.plastic_fan",
    "prop.plastic_calculator",
    "prop.leather_folder",
    "prop.plastic_stapler",
    "prop.metal_tray",
    "prop.wood_small",
    "world.stairs",
    "stairs.wood",
    "stairs.metal",
    "world.mud_puddles",
    "world.concrete_flooded",
    "prop.plastic_marker_tip",
    "world.linoleum_wet",
    "prop.metal_keg",
    "prop.bicycle",
    "prop.rubber_plunger",
    "prop.plastic_marker",
    "prop.metal_door_handle",
    "prop.wood_chair",
    "prop.wood_chair_light",
    "prop.barstool_top",
    "prop.metal_vase",
    "prop.metal_vase_small",
    "prop.wood_crate_ammo",
    "prop.wood_pic_frame_small",
    "prop.wood_pic_frame_med",
    "prop.computer_small",
    "prop.plastic_mask_toy",
    "prop.multitool",
    "prop.porcelain_sink",
    "prop.porcelain_chunk",
    "prop.metal_aerosol_can",
    "prop.plastic_bottle_small_empty",
    "prop.plastic_bottle_fivegal_empty",
    "prop.mannequin",
    "prop.plastic_garbage_bag",
    "prop.tabletop_eraser",
    "prop.train_door_pipe",
    "prop.metal_heavy_misc"
]

from pathlib import Path
import re
from difflib import get_close_matches

root = Path(input("Enter content path:"))

trans = {}
def write_appropriate(mat_path: Path, lines, surface_line, surface):
    s1_surface = surface.strip('"').lower()
    s2_surface = s1_surface
    local_mat = mat_path.relative_to(root)

    # these don't change
    if s1_surface in ('default', 'default_silent', 'no_decal', 'player', 'roller', 'weapon', 'solidmetal', 'flesh'):
        return
    def get():
        if("props" in local_mat.parts): match_ = get_close_matches('prop.' + s1_surface, hlvr_surfaces, 1, 0.4)
        else: match_= get_close_matches('world.' + s1_surface, hlvr_surfaces, 1, 0.6) or get_close_matches(s1_surface, hlvr_surfaces, 1, 0.6)
        
        return {
            'chainlink': 'world.chainlink',
            'tile': "world.tile_floor",
            'tiles': "world.tile_floor",
            'stone': "world.rock",
            'leaves': "world.grass",
            'rubber': "base.rubber",
            'carpet': "world.carpet",
            'metalpanel': "world.metal_panel",
            'stucco': "world.concrete_debris",
            'cloth': "base.cloth",
            "curtain": "base.cloth",
            "computer": "prop.computer",
            "grate": "world.metal_grate",
        }.get(s1_surface, match_[0] if match_ else s1_surface)

    s2_surface = get()
    trans[s1_surface] = s2_surface

    with mat_path.open("w") as fp:
        fixedlines = []
        for line in lines:
            if line == surface_line:
                line = line.replace(surface, f'"{s2_surface}"')
            fixedlines.append(line)
        fp.writelines(fixedlines)
    
        print("Wrote", surface, s2_surface, local_mat)

for material in (root / "materials").glob("**/*.vmat"):
    with material.open() as fp:
        lines = fp.readlines()
        for line in lines:
            if "PhysicsSurfaceProperties" in line:
                if (match_:= re.search('"\w{1,}"', line)) is not None:
                    write_appropriate(material, lines, line, match_.group(0))
                break

for kv in trans.items():
    print(kv)
